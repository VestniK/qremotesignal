<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>QRemoteSignal: qrs::JsonSerializer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">QRemoteSignal
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceqrs.html">qrs</a></li><li class="navelem"><a class="el" href="classqrs_1_1JsonSerializer.html">JsonSerializer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classqrs_1_1JsonSerializer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">qrs::JsonSerializer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a> serializer for simple JSON based remote call protocol.  
 <a href="classqrs_1_1JsonSerializer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="jsonserializer_8h_source.html">jsonserializer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for qrs::JsonSerializer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classqrs_1_1JsonSerializer.png" usemap="#qrs::JsonSerializer_map" alt=""/>
  <map id="qrs::JsonSerializer_map" name="qrs::JsonSerializer_map">
<area href="classqrs_1_1AbsMessageSerializer.html" title="Abstrac tinterface for all remote call serializers. " alt="qrs::AbsMessageSerializer" shape="rect" coords="0,56,162,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acaa2486cd4f6d289b1a703ea11385cc6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acaa2486cd4f6d289b1a703ea11385cc6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>JsonSerializer</b> (QObject *parent=0)</td></tr>
<tr class="separator:acaa2486cd4f6d289b1a703ea11385cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad3e0295ab6ee2b52d0e4cf9a41d7bcb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad3e0295ab6ee2b52d0e4cf9a41d7bcb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>JsonSerializer</b> (int <a class="el" href="classqrs_1_1AbsMessageSerializer.html#a7dc0b692a0fbad367587715e24256fbf">version</a>, QObject *parent=0)</td></tr>
<tr class="separator:aad3e0295ab6ee2b52d0e4cf9a41d7bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62711f539347e689d2e8def70fde3f1c"><td class="memItemLeft" align="right" valign="top">virtual QByteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqrs_1_1JsonSerializer.html#a62711f539347e689d2e8def70fde3f1c">serialize</a> (const <a class="el" href="classqrs_1_1Message.html">Message</a> &amp;msg)  throw (UnsupportedTypeException)</td></tr>
<tr class="memdesc:a62711f539347e689d2e8def70fde3f1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serealize <a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a>.  <a href="#a62711f539347e689d2e8def70fde3f1c">More...</a><br/></td></tr>
<tr class="separator:a62711f539347e689d2e8def70fde3f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad813751af9ab056a482bbc3d5e7802a3"><td class="memItemLeft" align="right" valign="top">virtual MessageAP&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqrs_1_1JsonSerializer.html#ad813751af9ab056a482bbc3d5e7802a3">deserialize</a> (const QByteArray &amp;msg)  throw (MessageParsingException)</td></tr>
<tr class="memdesc:ad813751af9ab056a482bbc3d5e7802a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deserealize <a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a>.  <a href="#ad813751af9ab056a482bbc3d5e7802a3">More...</a><br/></td></tr>
<tr class="separator:ad813751af9ab056a482bbc3d5e7802a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classqrs_1_1AbsMessageSerializer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classqrs_1_1AbsMessageSerializer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classqrs_1_1AbsMessageSerializer.html">qrs::AbsMessageSerializer</a></td></tr>
<tr class="memitem:af1f689583f594005d719b9eadef0a1fb inherit pub_methods_classqrs_1_1AbsMessageSerializer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqrs_1_1AbsMessageSerializer.html#af1f689583f594005d719b9eadef0a1fb">AbsMessageSerializer</a> (QObject *parent=0)</td></tr>
<tr class="separator:af1f689583f594005d719b9eadef0a1fb inherit pub_methods_classqrs_1_1AbsMessageSerializer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dde80ef2c0f33cf737ed73e44e67598 inherit pub_methods_classqrs_1_1AbsMessageSerializer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqrs_1_1AbsMessageSerializer.html#a2dde80ef2c0f33cf737ed73e44e67598">AbsMessageSerializer</a> (int <a class="el" href="classqrs_1_1AbsMessageSerializer.html#a7dc0b692a0fbad367587715e24256fbf">version</a>, QObject *parent=0)</td></tr>
<tr class="separator:a2dde80ef2c0f33cf737ed73e44e67598 inherit pub_methods_classqrs_1_1AbsMessageSerializer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc0b692a0fbad367587715e24256fbf inherit pub_methods_classqrs_1_1AbsMessageSerializer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqrs_1_1AbsMessageSerializer.html#a7dc0b692a0fbad367587715e24256fbf">version</a> () const </td></tr>
<tr class="separator:a7dc0b692a0fbad367587715e24256fbf inherit pub_methods_classqrs_1_1AbsMessageSerializer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a> serializer for simple JSON based remote call protocol. </p>
<p>This class serializes internal library message representation to a simple JSON based protocol message. You can get pointer to single global instance of this class with jsonSerializer macro.</p>
<p>Top level element of JSON object can be <b>RemoteCall</b> or <b>Error</b> it contains child JSON object with detailed information about slot to be called or about error.</p>
<h1><a class="anchor" id="RemoteCall"></a>
Remote call JSON representation.</h1>
<p>Remote call message contains the following elements in the child JSON object: </p>
<ul>
<li><b>service</b> element containing string with destination service name. </li>
<li><b>method</b> element containing string with destination slot name. </li>
<li><b>params</b> element containing map of slot parameters. Each parameterhas a name which is stored as a key in this map.</li>
</ul>
<p>Here is an example of a remote call message: </p>
<div class="fragment"><div class="line">{</div>
<div class="line">   <span class="stringliteral">&quot;RemoteCall&quot;</span> : {</div>
<div class="line">      <span class="stringliteral">&quot;service&quot;</span> : <span class="stringliteral">&quot;Example&quot;</span> ,</div>
<div class="line">      <span class="stringliteral">&quot;method&quot;</span> : <span class="stringliteral">&quot;foo&quot;</span> ,</div>
<div class="line">      <span class="stringliteral">&quot;params&quot;</span> : {</div>
<div class="line">         <span class="stringliteral">&quot;num&quot;</span> : 128</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><p> This message is request to call slot <b>foo</b> in the <b>Example</b> service with single parameters' <b>num</b> value 128.</p>
<p>There is no information about parameter type and if it is possible to convert parameters' value to the required type then no error will occure during processing this message. For example if service <b>Example</b> has a slot <b>foo</b> with the following definition: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> foo(<span class="keyword">const</span> QString &amp;num);</div>
</div><!-- fragment --><p> then value in the JSON message will be converted to string "128".</p>
<p>Conversations of values are done by convertor functions: </p>
<div class="fragment"><div class="line">QVariant qrs::createArg(<span class="keyword">const</span> YourType &amp;val);</div>
<div class="line"><span class="keywordtype">bool</span> qrs::getArgValue(<span class="keyword">const</span> QVariant &amp;arg, YourType&amp; res);</div>
</div><!-- fragment --><p> You can find more information about them in the <a class="el" href="converters.html">Types that can be used as remote callable slots arguments</a> article.</p>
<h1><a class="anchor" id="Error"></a>
Error message JSON representation.</h1>
<p>Error message contains the following elements in the child JSON object: </p>
<ul>
<li><b>errorCode</b> element containing integer code of error. Possible values are listed in the <a class="el" href="classqrs_1_1Message.html#a74c5f8f972118a58c06445bbd371f117">Message::ErrorType</a> enum. </li>
<li><b>description</b> element containing human readable error description. </li>
<li>Optional <b>service</b> element containing the name of a service where error occured. For example error message with this element may be returned in responce on remote call of slot in some service if destination service doesn't contain requested slot. </li>
<li>Optional <b>method</b> element with the name of a method where error occured. Error message can contain this element only if it also contains <b>service</b> element.</li>
</ul>
<p>Here is example of error message JSON representation: </p>
<div class="fragment"><div class="line">{</div>
<div class="line">   <span class="stringliteral">&quot;Error&quot;</span> : {</div>
<div class="line">      <span class="stringliteral">&quot;errorCode&quot;</span> : 4,</div>
<div class="line">      <span class="stringliteral">&quot;description&quot;</span> : <span class="stringliteral">&quot;Unknown method wrong&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;service&quot;</span> : <span class="stringliteral">&quot;Example&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;method&quot;</span> : <span class="stringliteral">&quot;wrong&quot;</span></div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>JSON object representing error generated by this serializer always contains <b>service</b> and <b>method</b> elements even if they are not specified they contains empty strings. However this serializer can understand error messages without optional elements so there is no need to specify them if you want to call slot in application which is using this serializer for remote calls from application which is not using QRemoteSignal library. </dd></dl>

<p>Definition at line <a class="el" href="jsonserializer_8h_source.html#l00101">101</a> of file <a class="el" href="jsonserializer_8h_source.html">jsonserializer.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad813751af9ab056a482bbc3d5e7802a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MessageAP JsonSerializer::deserialize </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>msg</em>)</td><td></td>
          <td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"><a class="el" href="classqrs_1_1MessageParsingException.html">MessageParsingException</a></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deserealize <a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a>. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classqrs_1_1MessageParsingException.html" title="Error during message parsing exception. ">MessageParsingException</a></td><td>in case of error during message parsing</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>underlying protocol raw message to be converted to a <a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a> class instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a> class instance</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classqrs_1_1AbsMessageSerializer.html#a13461e3103e4110226ec17da52417410" title="Serealize Message. ">serialize</a> </dd></dl>

<p>Implements <a class="el" href="classqrs_1_1AbsMessageSerializer.html#a123deb41c52c9fea04338f8bbc18a140">qrs::AbsMessageSerializer</a>.</p>

<p>Definition at line <a class="el" href="jsonserializer_8cpp_source.html#l00049">49</a> of file <a class="el" href="jsonserializer_8cpp_source.html">jsonserializer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a62711f539347e689d2e8def70fde3f1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray JsonSerializer::serialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classqrs_1_1Message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em>)</td><td></td>
          <td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"><a class="el" href="classqrs_1_1UnsupportedTypeException.html">UnsupportedTypeException</a></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serealize <a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a>. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classqrs_1_1UnsupportedTypeException.html" title="Unsupported type exception. ">UnsupportedTypeException</a></td><td>if remote call object contain data which can't be converted to the underlying protocol message. For example Message::params contain parameters of types not supported by underlying protocol.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td><a class="el" href="classqrs_1_1Message.html" title="Message representation. ">Message</a> class instance to be converted to a underlying protocol message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>raw underlying protocol message.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classqrs_1_1AbsMessageSerializer.html#a123deb41c52c9fea04338f8bbc18a140" title="Deserealize Message. ">deserialize</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>what to do if message type is incorrect? </dd></dl>

<p>Implements <a class="el" href="classqrs_1_1AbsMessageSerializer.html#a13461e3103e4110226ec17da52417410">qrs::AbsMessageSerializer</a>.</p>

<p>Definition at line <a class="el" href="jsonserializer_8cpp_source.html#l00028">28</a> of file <a class="el" href="jsonserializer_8cpp_source.html">jsonserializer.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="jsonserializer_8h_source.html">jsonserializer.h</a></li>
<li><a class="el" href="jsonserializer_8cpp_source.html">jsonserializer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 7 2013 01:26:57 for QRemoteSignal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
