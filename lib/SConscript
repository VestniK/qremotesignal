Import('BaseEnv')

env = BaseEnv.Clone()
env.EnableQt4Modules(['QtCore'])
env['CPPPATH'] = ['.']
if env['PLATFORM'] != 'win32':
   env.ParseConfig('pkg-config --cflags --libs QJson')
else:
   env['LIBS']+=['qjson']

Sources = ['baseconverters.cpp','communicationmanager.cpp',
           'jsonserializer.cpp']

Headers = ['QRemoteSignal','absservice.h','baseconverters.h',
           'communicationmanager.h','baseexception.h',
           'message.h','absmessageserializer.h',
           'jsonserializer.h']

libs = {}
libs['shared'] = env.SharedLibrary('QRemoteSignal',Sources)
libs['static'] = env.Library('QRemoteSignal',Sources)

env.Install(env['PREFIX']+'/lib/',libs['shared'])
env.Install(env['PREFIX']+'/lib/',libs['static'])
env.Install(env['PREFIX']+'/include/qremotesignal',Headers)

Return('libs')
